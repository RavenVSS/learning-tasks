# Задача. Асинхронная конвертация файлов

### Аргументация
Если сервисом будут пользоваться часто, по 1000 запросов в минуту, а у нас машина слабая, то желательно делать асинхронную обработку.

### Хвосты
| URL | Возвращаемое значение | Описание |
| ----------------------- | ----------- | ----------- |
| POST /convert-to-webp/async | UUID | Запрос возвращает UUID задачи на конвертацию |
| GET /convert-to-webp/async/{UUID}/status | TaskStatus, ErrorMessage | Возвращает статус конвертации SUCCESS, ERROR или PROCESSING, если ERROR, то информация об ошибке |
| GET /convert-to-webp/async/{UUID} | File | Возвращает файл, либо 404 статус, если конвертация ещё не завершена или ошибка |

### Требования
- хранить задачи в БД PostgreSql
- обработка должна выполняться независимо от запросов (в отдельных потоках)
- наличие интеграционных тестов: на все 3 запроса, на обработчик задач
- файлы хранить в отдельных папках (in, out), важно, чтобы одинаковое название файлов не влияло на работу сервиса

### Вариант реализации
Через планировщик задач, который каждые N времени будет обрабатывает все актуальные задачи из БД.  

![Диаграмма](/task-1.png)

### Почитать
- [Подключение PostgreSql в Spring](https://www.bezkoder.com/spring-boot-postgresql-example/)
- [JPA репозитории](https://www.baeldung.com/spring-data-repositories)
- [Планировщик задач](https://www.baeldung.com/spring-scheduled-tasks)
